<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from download.alesko.eu/cons/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 15 Nov 2021 19:33:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="css/style.css">
    <title>Shop</title>
	<script src="js/signals.min.js"></script>
	<script src="js/three.min.js"></script>
	<script src="js/OBJLoader.js"></script>
	<script src="js/OrbitControls.js"></script>
	<script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/slick.min.js"></script>
</head>
<body>
    
		<header class="header">
			<div class="header__left">
				<a href="#" class="header__location">
					<img class="header__img" src="img/location.svg" alt="">
					<h5 class="header__city">Новосибирск</h5>
				</a>
			</div>
			<div class="header__right">
				<nav class="nav">
					<a href="#" class="nav__link">Контакты</a>
					<a href="#" class="nav__link">О нас</a>
					<a href="#" class="nav__link">Программа лояльности</a>
					<a href="#" class="nav__link">Помощь и FAQ</a>
					<div class="buttons__header">
						<a href="#">
							<button class="button__prom">
								<span class="button__img">%</span>
								<span class="button prom-text">Акции</span>
							</button>
						</a>
						<a href="#">
							<button class="button__black">
								<img class="button__img" src="img/delivery.svg" alt="">
								<span class="button delivery-text">Доставка и оплата</span>
							</button>
						</a>
					   
					</div>
					<div class="languages">
						<a href="#" class="languages__change active">RU</a>
						<a href="#" class="languages__change">EN</a>
					</div>

				</nav>
			</div>
		</header>
		
		<div class="container">
			<section>
				<div class="menu">
					<div class="menu__left">
						<img class="menu__img" src="img/youchoose.png" alt="" class="menu__logo">
						<div class="menu__choice">
							<button class="menu__button active">
								<h3 class="menu__text active">Женщины</h3>
							</button>
						  
							<button class="menu__button">
								<h3 class="menu__text ">мужчины</h3>
							</button>
						  
							<button class="menu__button">
								<h3 class="menu__text ">дети</h3>
							</button>
						  
						</div>
					</div>
					<div class="menu__right">
						<div class="menu__search">
							<input type="search" value="" placeholder="Искать товары" class="search__input">
							<button type="submit" class="search__button">
							<img href="#"  src="img/search.svg" class="search__img">
							</button>
						</div>
						<a href="#" class="menu__user">
							<img src="img/user.svg" alt="">
							<h2 class="menu__txt">Мой аккаунт</h2>
						</a>
						<a href="#" class="menu__user">
							<img src="img/basket.svg" alt="">
							<h2 class="menu__txt">Корзина (0)</h2>
						</a>
					</div>
				</div>
			</section>
			<section>
				<div class="widgets">
					<div class="widgets__catalog">
						<button class="catalog__button">
							<span></span>
						</button>
						<p>каталог</p>
					</div>
					<div class="widgets__conf">
						<button class="conf__button">
							<img class="button__img" src="img/constructor.svg" alt="">
							<span class=" conf-text">конструктор одежды</span>
						</button>
					</div>
				</div>
			</section>
			
			<section>
				<main class="main">
					<sidebar class="sidebar">
						<h1 class="sidebar__title">
							женская одежда
						</h1>
						<ul class="sidebar__inner">
								<li class="sidebar__item">
									<button class="accordion">Casual</button>
									<div class="sidebar__checkbox">
										<label class="checkbox">
											<input type="checkbox">
											<div class="checkbox__text">худи</div>
										</label>
										<label class="checkbox">
											<input type="checkbox">
											<div class="checkbox__text">футболка/лонгслив</div>
										</label>
										<label class="checkbox">
											<input type="checkbox">
											<div class="checkbox__text">свитшот</div>
										</label>
										<label class="checkbox">
											<input type="checkbox">
											<div class="checkbox__text">hooli лук</div>
										</label>
										<label class="checkbox">
											<input type="checkbox">
											<div class="checkbox__text">шорты</div>
										</label>
										<label class="checkbox">
											<input type="checkbox">
											<div class="checkbox__text">штаны</div>
										</label>
									</div>
								</li>
								<li class="sidebar__item">
									<button class="accordion ">Платья и рубашки</button>
								</li>
								<li class="sidebar__item">
									<button class="accordion ">Нижнее бельё</button>
								</li>
								<li class="sidebar__item">
									<button class="add__button">
										<img src="img/addToConstructor.svg" alt="" class="button__img">
										<span >Доставка и оплата</span>
									</button>
								</li>

							</ul>
					</sidebar>
					<div class="conf">
							<div class="order">
								<button class="catalog__button">
									<span></span>
								</button>
								<h1 class="order__title">
									Ваши товары
								</h1>
								<div class="slider">
									
									<div class="slider__item">
										<button class="button__order">
											<img class="order__img" src="img/constructor__img.png" alt="">
											<div class="order__details">
												<h4 class="order__name">Hooli ЛУК</h4>
												<span class="order__scale"></span>
												<div class="order__procent">80%</div>
							
											</div>
										</button>
									</div>
									<div class="slider__item">
										<button class="button__order">
											<img class="order__img" src="img/constructor__img.png" alt="">
											<div class="order__details">
												<h4 class="order__name">футболка</h4>
												<span class="order__scale"></span>
												<div class="order__procent">100%</div>
							
											</div>
										</button>
									</div>
									<div class="slider__item">
										<button class="button__order">
											<img class="order__img" src="img/constructor__img.png" alt="">
											<div class="order__details">
												<h4 class="order__name">шорты</h4>
												<span class="order__scale"></span>
												<div class="order__procent">0%</div>
							
											</div>
										</button>
									</div>
									<div class="slider__item">
										<button class="button__order">
											<img class="order__img" src="img/constructor__img.png" alt="">
											<div class="order__details">
												<h4 class="order__name">Hooli ЛУК</h4>
												<span class="order__scale"></span>
												<div class="order__procent">80%</div>
							
											</div>
										</button>
									</div>
								</div>
								
								<button class="shop__counter">
									<img src="img/counter.svg" alt="">
									<h1 class="counter">2</h1>
								</button>
							</div>
				
						<div class="conf__inner">
							<div class="conf__change" id="contentLoader">
								<div id="loader"></div>
								<div class="conf__preview">
									<div id="viewportContainer"><canvas id="viewport"></canvas></div>
								</div>		
							</div>
					
							<!-- --------------------------------------------------------------------------------------------- -->
							
							<div class="conf__details">
								<ul class="conf__list">
									<li class="conf__item">
										<button class="accordion list active">Худи</button><!-- active -->
										<div class="conf__options" >
											<button data-layer="hood" data-parts-list="#hoodie_part_list_hood" data-color-list="#color_list_1" class="button__options">Капюшон
												<span class="color-clothes"></span>
											</button>
											<button data-layer="base" data-parts-list="#hoodie_part_list_base" data-color-list="#color_list_2" class="button__options">Основа
												<span class="color-clothes"></span>
											</button>
											<button data-layer="sleeves" data-parts-list="#hoodie_part_list_sleeves" data-color-list="#color_list_3" class="button__options">Рукава
												<span class="color-clothes"></span>
											</button>
										</div>
									</li>
								</ul>    
							</div>
							
							<!-- --------------------------------------------------------------------------------------------- -->
							
							<div class="conf__add" id="hoodie_part_list_hood">
								<button data-file="models/Капюшон Анорак.obj" class="add__block active">
									<img class="add__img" src="img/constructor__img.png" alt="">
									<h2 class="add__price">+1000 р</h2>
								</button>
								<button data-file="models/Капюшон внахлест.obj" class="add__block">
									<img class="add__img" src="img/constructor__img.png" alt="">
								</button>
								<button data-file="models/Капюшон Классика с веревками.obj" class="add__block">
									<img class="add__img" src="img/constructor__img.png" alt="">
									<h2 class="add__price">+1000 р</h2>
								</button>
							</div>
							
							<div class="conf__add" id="hoodie_part_list_base">
								<button data-file="models/Основа короткая Низ на резинке Без карманов.obj" class="add__block active">
									<img class="add__img" src="img/constructor__img.png" alt="">
									<h2 class="add__price">+1000 р</h2>
								</button>
							</div>
							
							<div class="conf__add" id="hoodie_part_list_sleeves">
								<button data-file="models/Рукава с дыркой в манжетах.obj" class="add__block active">
									<img class="add__img" src="img/constructor__img.png" alt="">
									<h2 class="add__price">+1000 р</h2>
								</button>
								<button data-file="models/Рукава с кашкорсе.obj" class="add__block">
									<img class="add__img" src="img/constructor__img.png" alt="">
								</button>
								<button data-file="models/Рукава с обрезкой.obj" class="add__block">
									<img class="add__img" src="img/constructor__img.png" alt="">
								</button>
							</div>
							
						   <!-- --------------------------------------------------------------------------------------------- -->
						   
							<div class="conf__panel" id="color_list_1">
								<div class="panel" >
									<ul class="cp">
										<li data-color="#FF0000" class="cp__color"></li>
										<li data-color="#008000" class="cp__color"></li>
										<li data-color="#0000FF" class="cp__color"></li>
										<li data-color="#FFFF00" class="cp__color"></li>
										<li data-color="#800080" class="cp__color"></li>
										<li data-color="#FF6347" class="cp__color active"></li>
										<li data-color="#808080" class="cp__color"></li>
										<li data-color="#000000" class="cp__color"></li>
									</ul>
								</div>
							</div>
							
							 <div class="conf__panel" id="color_list_2">
								<div class="panel" >
									<ul class="cp">
										<li data-color="#FF0000" class="cp__color"></li>
										<li data-color="#008000" class="cp__color"></li>
										<li data-color="#0000FF" class="cp__color"></li>
										<li data-color="#FFFF00" class="cp__color active"></li>
										<li data-color="#800080" class="cp__color"></li>
										<li data-color="#FF6347" class="cp__color"></li>
										<li data-color="#808080" class="cp__color"></li>
										<li data-color="#000000" class="cp__color"></li>
									</ul>
								</div>
							</div>
							
							 <div class="conf__panel" id="color_list_3">
								<div class="panel" >
									<ul class="cp">
										<li data-color="#FF0000" class="cp__color active"></li>
										<li data-color="#008000" class="cp__color"></li>
										<li data-color="#0000FF" class="cp__color"></li>
										<li data-color="#FFFF00" class="cp__color"></li>
										<li data-color="#800080" class="cp__color"></li>
										<li data-color="#FF6347" class="cp__color"></li>
										<li data-color="#808080" class="cp__color"></li>
										<li data-color="#000000" class="cp__color"></li>
									</ul>
								</div>
							</div>
							
							<!-- --------------------------------------------------------------------------------------------- -->
					
							<div class="conf__price">
								<div class="price">
									<div class="price__before">14990 р</div>
									<div class="price__today">6990 р</div>
								</div>
								<button class="price__next">
									<h3>Далее</h3>
									<img src="img/right-arrow.svg" alt="">
								</button>
							</div>
						</div>    
					</div>
				</main>
			</section>		
		</div>
	
	<script>
		const View3D = ( urlList = null ) =>  
		{
			// console.clear();
				
			const _groundY = -16.5;
			const _modelScale = 0.0125;
			const _viewport = document.querySelector( '#viewport' );
			const _viewportContainer = document.querySelector( '#viewportContainer' );
			const _matcapMaterial = new THREE.MeshMatcapMaterial( { color:0xFFFFFF, side:THREE.DoubleSide, matcap:new THREE.TextureLoader().load( 'textures/matcap.png' ) } );	
			const _cache = {};
			const _layersData = {};
			const _raycaster = new THREE.Raycaster();
			const _raycasterCoords = new THREE.Vector2();
			const _click = { time:0, x:0, y:0, };
			const _signals = 
			{
				requestNextPart:new signals.Signal(),
				loadComplete:new signals.Signal(),
			};
					
			let canvasWidth = 0;
			let canvasHeight = 0;
			let renderer, camera, scene, gridHelper, controls, container;

			const setSize = ( w, h ) =>
			{
				canvasWidth = w;
				canvasHeight = h;

				if( renderer )
				{
					camera.aspect = canvasWidth / canvasHeight;
					camera.updateProjectionMatrix();

					renderer.setSize( canvasWidth, canvasHeight );	
				}
			};
			
			const getLayer = ( name ) => 
			{
				if( _layersData[ name ] == null )
				{
					const group = new THREE.Object3D();
						  group.userData.isLayer = true;
						  group.name = name;
					
					container.add( group );
					
					_layersData[ name ] =
					{
						group:group,
						material:_matcapMaterial.clone(),
						loader:null,
					};
				}
				
				return _layersData[ name ];
			};
			
			const addObj = ( layer, obj ) => 
			{
				obj.scale.set( _modelScale, _modelScale, _modelScale );
				obj.traverse( mesh =>
				{ 
					if( mesh.isMesh )
					{
						mesh.material = layer.material;
					}
				} );
				
				layer.group.add( obj );
				
				// TEST
				// max:new THREE.Vector3( 6.47, 6.14, 1.59 );
				// min:new THREE.Vector3( -6.87, -4.81, -2.47 );
				/*let box = new THREE.Box3();
					box.expandByObject( container );
					
				let size = box.getSize( new THREE.Vector3() );
				let center = new THREE.Vector3(); // box.getCenter( new THREE.Vector3() );
				let maxSize = 14; // Math.max( size.x, size.y, size.z );

				let fitHeightDistance = maxSize / ( 2 * Math.atan( Math.PI * camera.fov / 360 ) );
				let fitWidthDistance = fitHeightDistance / camera.aspect;*/
				let distance = 19; // Math.max( fitHeightDistance, fitWidthDistance ) * 1.25;	
				let direction = controls.target.clone().sub( camera.position ).normalize().multiplyScalar( distance );						

				controls.minDistance = controls.maxDistance = distance;
				controls.target.copy( new THREE.Vector3() );
				controls.update();
				
				controls.minDistance /= 2;
				controls.maxDistance *= 2;

				camera.near = distance / 100;
				camera.far = distance * 100;
				camera.updateProjectionMatrix();

				camera.position.copy( controls.target ).sub( direction );
			};
			
			const preload = ( urlList ) => 
			{
				let loaded = 0;
				
				urlList.forEach( url => 
				{
					if( _cache[ url ] ) 
						loaded++;
					else 
					{
						let loader = new THREE.OBJLoader();
							loader.load
							( 
								url, ( obj ) =>
								{
									if( _cache[ url ] == null )
										_cache[ url ] = obj;
									
									loaded++;
									
									if( loaded == urlList.length )
										_signals.loadComplete.dispatch();
								},
								null, ( error ) => console.log( 'An error happened [ ' + name + ' ] -> ' + error.stack )
							);
					}
				} );
				
				if( loaded == urlList.length )
					_signals.loadComplete.dispatch();
			};
				
			const setLayerURL = ( name, url ) => 
			{
				const layer = getLayer( name );

				if( layer.group )
				{
					while( layer.group.children.length > 0 )
					{
						let child = layer.group.children[ 0 ];		
							child.traverse( mesh =>
							{ 
								if( mesh.isMesh )
								{	
									mesh.material = null;
									
									/*if( mesh.geometry )
									{
										mesh.geometry.dispose();
										mesh.geometry = null;
									}*/
								}
							} );
						
						layer.group.remove( child );
					}
					
					if( _cache[ url ] ) 
					{
						layer.loader = null;
						
						addObj( layer, _cache[ url ] );
					}
					else 
					{
						let loader = new THREE.OBJLoader();
							loader.load
							( 
								url, ( obj ) =>
								{
									if( _cache[ url ] == null )
										_cache[ url ] = obj;
									
									if( layer.loader == loader )
										addObj( layer, obj );
								},
								null, ( error ) => console.log( 'An error happened [ ' + name + ' ] -> ' + error.stack )
							);
							
						layer.loader = loader;
					}
				}
			};
			
			const setLayerColor = ( name, color ) => 
			{
				const layer = getLayer( name );
				
				if( layer.material )
				{
					layer.material.color.set( color );
				}
			};
			
			const init = () =>
			{
				renderer = new THREE.WebGLRenderer( { antialias:true, preserveDrawingBuffer:true, canvas:_viewport } );
				renderer.outputEncoding = THREE.sRGBEncoding;
				renderer.setSize( canvasWidth, canvasHeight );
				renderer.setClearColor( 0xFFFFFF );
					
				camera = new THREE.PerspectiveCamera( 55, canvasWidth / canvasHeight, 0.05, 100 );
				camera.position.set( 0, 15, 0 );

				scene = new THREE.Scene();
				scene.add( camera );	

				container = new THREE.Object3D();
				container.position.set( 0, _groundY, 0 );

				scene.add( container );

				controls = new THREE.OrbitControls( camera, renderer.domElement );
				controls.autoRotate = false;
				controls.enablePan = true;
				controls.enableKeys = false;
				controls.enableDamping = true;
				controls.dampingFactor = .1;
				controls.screenSpacePanning = true;
				controls.minPolarAngle = controls.maxPolarAngle = Math.PI / 180 * 90;
				controls.update();

				controls.minPolarAngle = Math.PI / 180 * 0;
				controls.maxPolarAngle = Math.PI / 180 * 135;
				controls.minAzimuthAngle = -Infinity;
				controls.maxAzimuthAngle = Infinity;
				
				_viewportContainer.addEventListener( 'mousedown', onViewportPointerDown, true );
				_viewportContainer.addEventListener( 'touchstart', onViewportPointerDown, true );
				
				render();
				
				if( urlList == null || urlList.length == 0 )
					_signals.loadComplete.dispatch();
				else 
					preload( urlList );
			};
			
			const getLayerName = ( object ) => 
			{
				if( object.userData.isLayer )
					return object.name;
					
				if( object.parent != null )
					return getLayerName( object.parent );
				else
					return null;
			};

			const onViewportPointerDown = ( event ) => 
			{
				// console.log( 'viewportClick' );
				
				if( event.touches && event.touches.length > 1 )
					return;
				
				if( _click.time == 0 )
				{	
					_click.x = event.touches ? event.touches[ 0 ].clientX : event.clientX;
					_click.y = event.touches ? event.touches[ 0 ].clientY : event.clientY;
					_click.time = new Date().getTime();
				}
				else 
				{
					const cx = event.touches ? event.touches[ 0 ].clientX : event.clientX;
					const cy = event.touches ? event.touches[ 0 ].clientY : event.clientY;
					const dx = _click.x - cx;
					const dy = _click.y - cy;
					const d = Math.sqrt( dx * dx + dy * dy );
					const ct = new Date().getTime() - _click.time;
					
					// console.log( 'viewportClick:[ time:' + ct + ', distance:' + d + ' ]' );
					
					if( ct < 300 && d < 50 ) 
					{
						event.stopImmediatePropagation();

						console.log( 'viewportDoubleClick:[ time:' + ct + ', distance:' + d + ' ]' );

						_click.time = 0;
						
						const vr = _viewportContainer.getBoundingClientRect();
						const vcx = cx - vr.x;
						const vcy = cy - vr.y;

						_raycasterCoords.x = ( vcx / vr.width ) * 2 - 1;
						_raycasterCoords.y = -( vcy / vr.height ) * 2 + 1;
						_raycaster.setFromCamera( _raycasterCoords, camera );

						const intersects = _raycaster.intersectObjects( container.children, true );
						
						if( intersects.length > 0 )
						{
							const layerName = getLayerName( intersects[ 0 ].object );
							
							if( layerName != null )
								_signals.requestNextPart.dispatch( layerName );
						}
					}
					else 
						_click.time = new Date().getTime();

						_click.x = cx;
						_click.y = cy;
				}
			};

			const render = ( timestamp ) =>
			{
				if( timestamp === undefined || _viewportContainer.offsetWidth != canvasWidth || _viewportContainer.offsetHeight != canvasHeight )
					setSize( _viewportContainer.offsetWidth, _viewportContainer.offsetHeight );

				controls.update();
				
				renderer.render( scene, camera );
				requestAnimationFrame( render );
			};
			
			init();
			
			return {
				signals:_signals,
				setLayerURL,
				setLayerColor,
			};
		};


		$( document ).ready( function()
		{
			$( '.slider' ).slick
			( {
				centerMode:true,
				centerPadding:'0px',
				slidesToShow:3,
				responsive:
				[
					{
						breakpoint:991,
						settings: 
						{
							centerMode:true,
							centerPadding:'0px',
							slidesToShow:2
						}
					},
					{
						breakpoint:768,
						settings: 
						{
							centerMode:true,
							centerPadding:'0px',
							slidesToShow:3
						}
					},
					{
						breakpoint:560,
						settings: 
						{
							centerMode:true,
							slidesToShow:2
						}
					},
					{
						breakpoint: 480,
						settings: 
						{
							centerMode:true,
							slidesToShow:1
						}
					}
				]        
			} );
			
			/*$( '.accordion' ).click( function( event ) // WTF???
			{
				// $( this ).toggleClass( 'active' ).next().slideToggle( 300 );
			} );*/
			
			const urlList = [];
			
			// console.log( $( '[data-file]' ) );
			
			$( '[data-file]' ).each( function( index, element )
			{
				urlList.push( $( this ).attr( 'data-file' ) );
			} );
			
			const view3D = View3D( urlList );
				  view3D.signals.requestNextPart.add( onRequestNextPart );
				  view3D.signals.loadComplete.add( onLoadComplete );

			
			function onLayerButtonClick()
			{
				let button = $( this );
				
				if( !button.hasClass( 'active' ) )
				{
					let isColorListVisible = $( '.conf__panel' ).hasClass( 'active' );

					$( '.button__options' ).removeClass( 'active' );
					$( '.conf__add' ).removeClass( 'active' );  
					$( '.color-clothes' ).removeClass( 'active' );
					$( '.conf__panel' ).removeClass( 'active' );
					
					//
					
					button.addClass( 'active' );

					let colorList = $( button.attr( 'data-color-list' ) );
					let colorListToggleVisibilityButton = button.children( '.color-clothes' );
					let partsList = $( button.attr( 'data-parts-list' ) );
						partsList.addClass( 'active' );
					
					if( isColorListVisible )
					{			
						colorListToggleVisibilityButton.addClass( 'active' );
						colorList.addClass( 'active' );
					}
				}
			}
			
			function onPartsListItemClick()
			{
				let partsListItem = $( this );
				
				if( !partsListItem.hasClass( 'active' ) )
				{
					partsListItem.siblings( '.add__block' ).removeClass( 'active' );
					partsListItem.addClass( 'active' );
					
					onPartsListItemSelect( partsListItem );
				}
			}
			
			function onPartsListItemSelect( partsListItem )
			{
				let file = partsListItem.attr( 'data-file' );
				let partsListID = partsListItem.parents( '.conf__add' ).attr( 'id' );
				let layerName = $( '[data-parts-list="#' + partsListID + '"]' ).attr( 'data-layer' );
				
				console.log( 'onPartsListItemSelect [ file:' + file + ', layer:' + layerName + ' ]' );
				
				view3D.setLayerURL( layerName, file );
			}
			
			function onRequestNextPart( layerName )
			{
				console.log( 'onRequestNextPart [ layerName:' + layerName + ' ]' );
				
				let layerButton = $( '.button__options[data-layer="' + layerName + '"]' );
				
				if( layerButton.length == 1 )
				{
					layerButton.click();

					let partsList = $( layerButton.attr( 'data-parts-list' ) );
					let partsListItems = partsList.children( '.add__block' );
					
					if( partsListItems.length > 1 )
					{
						let selectedPartsListItem = partsList.children( '.active' );
						let nextIndex = selectedPartsListItem.index() == partsListItems.length - 1 ? 0 : selectedPartsListItem.index() + 1;
						
						console.log( 'selectNextPartListItem[ currentIndex:' + selectedPartsListItem.index() + ', nextIndex:' + nextIndex + ' ]' );
						
						partsListItems[ nextIndex ].click();						
					}
				}
			}
			
			function onColorListItemClick()
			{
				let colorListItem = $( this );

				if( !colorListItem.hasClass( 'active' ) )
				{	
					colorListItem.siblings().removeClass( 'active' );
					colorListItem.addClass( 'active' );
					
					onColorListItemSelect( colorListItem );
				}
			};
				
			function onColorListItemSelect( colorListItem )
			{
				let color = colorListItem.attr( 'data-color' );
				let colorListID = colorListItem.parents( '.conf__panel' ).attr( 'id' );
				let layerName = $( '[data-color-list="#' + colorListID + '"]' ).attr( 'data-layer' );
				
				console.log( 'onColorListItemSelect [ color:' + color + ', layer:' + layerName + ' ]' );
				
				view3D.setLayerColor( layerName, color );
			}
			
			function onColorListVisibilityButtonClick()
			{
				let button = $( this );
				let colorListID = button.parent().attr( 'data-color-list' );
				let colorList = $( colorListID );
				
				if( button.hasClass( 'active' ) )
				{
					button.removeClass( 'active' );
					colorList.removeClass( 'active' );
				}
				else 
				{
					button.addClass( 'active' );
					colorList.addClass( 'active' );	
				}
			}

			// ------------------------------------------------------------------------------
			
			// $( '.conf__details' ).css( 'display', 'none' );
			// $( '.conf__preview' ).css( 'display', 'none' );
			
			$( '#content' ).css( 'display', 'none' );
			
			function onLoadComplete()
			{
				// $( '.conf__details' ).css( 'display', '' );
				// $( '.conf__preview' ).css( 'display', '' );
				
				$( '.cp__color' ).each( function( index )
				{
					let colorListItem = $( this );
						colorListItem.css( 'background-color', colorListItem.data( 'color' ) );
						colorListItem.click( onColorListItemClick );
					
					if( colorListItem.hasClass( 'active' ) )
						onColorListItemSelect( colorListItem ); 
				} );
				
				$( '.add__block' ).each( function( index )
				{
					let partsListItem = $( this );
						partsListItem.click( onPartsListItemClick );
						
					if( partsListItem.hasClass( 'active' ) )
						onPartsListItemSelect( partsListItem );
				} );
				
				$( '.color-clothes' ).click( onColorListVisibilityButtonClick );
				$( '.button__options' ).click( onLayerButtonClick );
				$( '.button__options' ).first().click();
				
				// 
				$( '#content' ).css( 'display', 'block' );
				
				fadeOutLoader(); 
			}
			
			function fadeOutLoader()
			{
				let opacity = 1;
				let loader = $( '#loader' );

				const setOpacity = () => 
				{
					if( opacity > 0 )
					{
						loader.css( 'opacity', opacity -= 0.05 );
						setTimeout( setOpacity, 20 );
					}						
					else 
					{
						loader.css( 'display', 'none' ); 
						$( '#contentLoader' ).css( 'display', 'block' );
					}
				};
				
				setOpacity()
			}

		} );



	</script>
</body>

<!-- Mirrored from download.alesko.eu/cons/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 15 Nov 2021 19:34:07 GMT -->
</html>
